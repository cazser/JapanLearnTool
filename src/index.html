<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>Document</title>
</head>

<body>
    <h1>练习</h1>
    <p>填写对应的日语</p>
    <form id="form">
        <span id="prompt">中国人</span>
        <input id="input" type="text">
        <button>提交</button>
    </form>
    <div role="alert" id="toast" class="toast" >
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <i class="weui-icon-success-no-circle weui-icon_toast"></i>
            <p class="weui-toast__content">正确</p>
        </div>
    </div>

    <div role="alert" id="errorToast" class="toast" >
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast weui-toast_text-more">
            <i class="weui-icon-warn weui-icon_toast"></i>
            <p class="weui-toast__content">错误</p>
        </div>
    </div>
    <details>
    <summary>
        五十音图
    </summary>
    <table>
        <thead></thead>
        <tbody>
            <tr>
            <td>あ</td>
            <td>い</td>
            <td>う</td>
            <td>え</td>
            <td>お</td>
            </tr>
        </tbody>
    </table>
    
    </details>
<script>


    function getRandomInt(max) {
  return Math.floor(Math.random() * max);
}
    let words = {
        'ちゅうごくじん':"中国人",
        'ちゅうごくじ':"中国人",
        'にほんじん': "日本人",
        'かんこくじん':'韩国人',
        'アメリかじん':'美国人',
        'がくせい':'学生',
        'せんせい':'老师',
        'フランスじん':"法国人",
        'りゆうがくせい':'留学生',
        'きょうじゅ':'教授',
        'わたし': '我',
        'しょくいん':"职员",
        'かいしょくいん':'公司职员',
        'てんいん':'店员',
        'けんしゅうせい':"研修生",
        'きぎょう':'企业',
        'だいがく':'大学',
        'かちょう':"科长",
        'しゃちょう':'社长',
        'でむかえ':"迎接",
        "あのひと":"那个人",
        'あなた':"你",
        "はい":"是",
        "いいえ":"不是",
        "あっ":"哎呀",
        'ちゅうごく':"中国",
        'すみません':"对不起，请问",
        'どうぞ':'请',
           
    }
    let form = document.querySelector("#form");
    let prompt = document.querySelector("#prompt");
    let input = document.querySelector("#input");
    form.addEventListener("submit", (e)=>{
        
        if(words[input.value] === prompt.textContent){
            let toast = document.querySelector("#toast");
            toast.classList.remove("toast");
            const synUtterance = new window.SpeechSynthesisUtterance();
            synUtterance.text = input.value;
            synUtterance.lang = "ja-JP";
            synUtterance.pitch = 2; //音调高低0～2，默认1
            synUtterance.rate = 1;
            window.speechSynthesis.speak(synUtterance);
           setTimeout(()=>{
                toast.classList.add("toast")
            },300)    
        }else{ 
            let toast = document.querySelector("#errorToast"); 
             toast.classList.remove("toast");
            setTimeout(()=>{
                toast.classList.add("toast")
            },300)   
           // console.log("no")
        }
        const keys =  Object.keys(words);
        let random = getRandomInt( keys.length);
        prompt.textContent =words[ keys[random]];
        input.value ="";
        e.preventDefault();
    })
</script>
</body>
</html>